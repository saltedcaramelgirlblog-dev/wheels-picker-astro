<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>Astro Basics</title>
	</head>
	<body>
    <div class="container">
        <div class="nav-bar">
			<nav class="nav-container">
				<ul class="nav-links">
					<li><a href="#" class="nav-link">Link 1</a></li>
					<li><a href="#" class="nav-link">Link 2</a></li>
					<li><a href="#" class="nav-link" id="settings-link">Settings</a></li>
					<li><a href="#" class="nav-link" id="themes-link">Themes</a></li>
				</ul>
			</nav>
        </div>
        <div class="sidebar-1"></div>
        <div class="sidebar-2"></div>
        <div class="game-area">
            <div class="game-area-head"></div>
            <div class="game-area-main">
                <div class="game-area-main-left"><slot name="game-left" /><slot name="game" /></div>
                <div class="game-area-main-right"><slot name="game-right" /></div>
            </div>
            <div class="game-area-footer"></div>
        </div>
        <div class="main-content">
            <div class="main-content-left"></div>
            <div class="main-content-body">
                <article class="main-content-text"><slot /></article>
            </div>
            <div class="main-content-right"></div>
        </div>
        <div class="footer">
          <nav class="footer-nav">
            <ul class="nav-links">
              <li><a href="#" class="nav-link">Link 1</a></li>
              <li><a href="#" class="nav-link">Link 2</a></li>
              <li><a href="#" class="nav-link">Link 3</a></li>
              <li><a href="#" class="nav-link">Link 4</a></li>
            </ul>
          </nav>
        </div>
    </div>

    <!-- Themes Modal -->
    <div id="themes-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal" role="document">
            <h3 class="modal-title">Choose a Theme</h3>
            <div class="modal-body">
                <div class="themes-grid">
                    <div class="palette">
                        <div class="swatch" style="--color:#ececec"></div>
                        <div class="swatch" style="--color:#9fd3c7"></div>
                        <div class="swatch" style="--color:#385170"></div>
                        <div class="swatch" style="--color:#142d4c"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#233142"></div>
                        <div class="swatch" style="--color:#455d7a"></div>
                        <div class="swatch" style="--color:#f95959"></div>
                        <div class="swatch" style="--color:#e3e3e3"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#e7eaf6"></div>
                        <div class="swatch" style="--color:#a2a8d3"></div>
                        <div class="swatch" style="--color:#38598b"></div>
                        <div class="swatch" style="--color:#113f67"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#5585b5"></div>
                        <div class="swatch" style="--color:#53a8b6"></div>
                        <div class="swatch" style="--color:#79c2d0"></div>
                        <div class="swatch" style="--color:#bbe4e9"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#222831"></div>
                        <div class="swatch" style="--color:#393e46"></div>
                        <div class="swatch" style="--color:#f96d00"></div>
                        <div class="swatch" style="--color:#f2f2f2"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#155263"></div>
                        <div class="swatch" style="--color:#ff6f3c"></div>
                        <div class="swatch" style="--color:#ff9a3c"></div>
                        <div class="swatch" style="--color:#ffc93c"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#e0ffcd"></div>
                        <div class="swatch" style="--color:#fdffcd"></div>
                        <div class="swatch" style="--color:#ffebbb"></div>
                        <div class="swatch" style="--color:#ffcab0"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#ffcbcb"></div>
                        <div class="swatch" style="--color:#ffb5b5"></div>
                        <div class="swatch" style="--color:#407088"></div>
                        <div class="swatch" style="--color:#132743"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#f70776"></div>
                        <div class="swatch" style="--color:#c3195d"></div>
                        <div class="swatch" style="--color:#680747"></div>
                        <div class="swatch" style="--color:#141010"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#dbd8e3"></div>
                        <div class="swatch" style="--color:#5c5470"></div>
                        <div class="swatch" style="--color:#352f44"></div>
                        <div class="swatch" style="--color:#2a2438"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#00204a"></div>
                        <div class="swatch" style="--color:#005792"></div>
                        <div class="swatch" style="--color:#00bbf0"></div>
                        <div class="swatch" style="--color:#fdb44b"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#66bfbf"></div>
                        <div class="swatch" style="--color:#eaf6f6"></div>
                        <div class="swatch" style="--color:#fcfefe"></div>
                        <div class="swatch" style="--color:#f76b8a"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#e4f1fe"></div>
                        <div class="swatch" style="--color:#8dc6ff"></div>
                        <div class="swatch" style="--color:#22313f"></div>
                        <div class="swatch" style="--color:#34495e"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#272343"></div>
                        <div class="swatch" style="--color:#ffffff"></div>
                        <div class="swatch" style="--color:#e3f6f5"></div>
                        <div class="swatch" style="--color:#bae8e8"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#f0ece2"></div>
                        <div class="swatch" style="--color:#dfd3c3"></div>
                        <div class="swatch" style="--color:#c7b198"></div>
                        <div class="swatch" style="--color:#596e79"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#45171d"></div>
                        <div class="swatch" style="--color:#e84a5f"></div>
                        <div class="swatch" style="--color:#ff847c"></div>
                        <div class="swatch" style="--color:#fecea8"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#1d1716"></div>
                        <div class="swatch" style="--color:#402a23"></div>
                        <div class="swatch" style="--color:#a55233"></div>
                        <div class="swatch" style="--color:#f3bc77"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#83580b"></div>
                        <div class="swatch" style="--color:#d9b650"></div>
                        <div class="swatch" style="--color:#f5dd7b"></div>
                        <div class="swatch" style="--color:#fde994"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#a6e4e7"></div>
                        <div class="swatch" style="--color:#f9f9f9"></div>
                        <div class="swatch" style="--color:#ebcbae"></div>
                        <div class="swatch" style="--color:#8f8787"></div>
                    </div>
                    <div class="palette">
                        <div class="swatch" style="--color:#f3cba5"></div>
                        <div class="swatch" style="--color:#975a5e"></div>
                        <div class="swatch" style="--color:#453953"></div>
                        <div class="swatch" style="--color:#25161b"></div>
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="themes-modal-close" type="button">Close</button>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settings-modal" class="modal-overlay" role="dialog" aria-modal="true" aria-hidden="true">
        <div class="modal" role="document">
            <h3 class="modal-title">Settings</h3>
            <div class="modal-body">
                <div class="settings-grid">
                    <div class="setting">
                        <label for="spin-duration">Spin Duration: <span id="spin-duration-value">10</span>s</label>
                        <input id="spin-duration" type="range" min="1" max="60" value="10" />
                    </div>
                    <div class="setting">
                        <label for="wheel-volume">Wheel Sound Volume: <span id="wheel-volume-value">80</span>%</label>
                        <input id="wheel-volume" type="range" min="0" max="100" value="80" />
                    </div>
                    <div class="setting">
                        <label for="tada-volume">Tada Sound Volume: <span id="tada-volume-value">80</span>%</label>
                        <input id="tada-volume" type="range" min="0" max="100" value="80" />
                    </div>
                </div>
            </div>
            <div class="modal-actions">
                <button id="settings-modal-save" type="button">Save</button>
                <button id="settings-modal-reset" type="button">Reset</button>
                <button id="settings-modal-close" type="button">Close</button>
            </div>
        </div>
    </div>

    <script is:inline>
    (function initSettingsModal() {
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initSettingsModal, { once: true });
            return;
        }
        const settingsLink = document.getElementById('settings-link');
        const overlay = document.getElementById('settings-modal');
        const closeBtn = document.getElementById('settings-modal-close');
        const saveBtn = document.getElementById('settings-modal-save');
        const resetBtn = document.getElementById('settings-modal-reset');
        const spinDuration = document.getElementById('spin-duration');
        const spinDurationValue = document.getElementById('spin-duration-value');
        const wheelVolume = document.getElementById('wheel-volume');
        const wheelVolumeValue = document.getElementById('wheel-volume-value');
        const tadaVolume = document.getElementById('tada-volume');
        const tadaVolumeValue = document.getElementById('tada-volume-value');

        function open() {
            if (!overlay) return;
            overlay.classList.add('open');
            overlay.setAttribute('aria-hidden', 'false');
        }
        function close() {
            if (!overlay) return;
            overlay.classList.remove('open');
            overlay.setAttribute('aria-hidden', 'true');
        }

        if (settingsLink) settingsLink.addEventListener('click', (e) => { e.preventDefault(); open(); });
        if (overlay) overlay.addEventListener('click', (e) => { if (e.target === overlay) close(); });
        if (closeBtn) closeBtn.addEventListener('click', close);
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && overlay && overlay.classList.contains('open')) close(); });

        // Pending values; only applied on Save
        let pendingDurationSec = Number(spinDuration && spinDuration.value || 10);
        let pendingWheelVol = Number(wheelVolume && wheelVolume.value || 80) / 100;
        let pendingTadaVol = Number(tadaVolume && tadaVolume.value || 80) / 100;

        function updateLabelsFromInputs() {
            if (spinDuration && spinDurationValue) spinDurationValue.textContent = String(spinDuration.value);
            if (wheelVolume && wheelVolumeValue) wheelVolumeValue.textContent = String(wheelVolume.value);
            if (tadaVolume && tadaVolumeValue) tadaVolumeValue.textContent = String(tadaVolume.value);
        }
        updateLabelsFromInputs();

        if (spinDuration && spinDurationValue) {
            spinDuration.addEventListener('input', () => {
                pendingDurationSec = Number(spinDuration.value || 10);
                spinDurationValue.textContent = String(spinDuration.value);
            });
        }
        if (wheelVolume && wheelVolumeValue) {
            wheelVolume.addEventListener('input', () => {
                pendingWheelVol = Number(wheelVolume.value || 80) / 100;
                wheelVolumeValue.textContent = String(wheelVolume.value);
            });
        }
        if (tadaVolume && tadaVolumeValue) {
            tadaVolume.addEventListener('input', () => {
                pendingTadaVol = Number(tadaVolume.value || 80) / 100;
                tadaVolumeValue.textContent = String(tadaVolume.value);
            });
        }

        function dispatchSettingsNow() {
            window.dispatchEvent(new CustomEvent('wheel:updateSettings', { detail: {
                durationSec: pendingDurationSec,
                wheelVol: pendingWheelVol,
                tadaVol: pendingTadaVol
            }}));
        }
        if (saveBtn) saveBtn.addEventListener('click', () => { dispatchSettingsNow(); close(); });
        if (resetBtn) resetBtn.addEventListener('click', () => {
            // Defaults
            const d = { dur: 10, w: 80, t: 80 };
            if (spinDuration) spinDuration.value = String(d.dur);
            if (wheelVolume) wheelVolume.value = String(d.w);
            if (tadaVolume) tadaVolume.value = String(d.t);
            pendingDurationSec = d.dur;
            pendingWheelVol = d.w / 100;
            pendingTadaVol = d.t / 100;
            updateLabelsFromInputs();
        });
    })();
    </script>
    <script is:inline>
    (function initThemesModal() {
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initThemesModal, { once: true });
            return;
        }
        const themesLink = document.getElementById('themes-link');
        const overlay = document.getElementById('themes-modal');
        const closeBtn = document.getElementById('themes-modal-close');
        const grid = document.querySelector('#themes-modal .themes-grid');
        if (themesLink && overlay) {
            themesLink.addEventListener('click', (e) => {
                e.preventDefault();
                overlay.classList.add('open');
                overlay.setAttribute('aria-hidden', 'false');
            });
        }
        if (overlay) {
            overlay.addEventListener('click', (e) => {
                if (e.target === overlay) {
                    overlay.classList.remove('open');
                    overlay.setAttribute('aria-hidden', 'true');
                }
            });
        }
        if (grid && overlay) {
            grid.addEventListener('click', (e) => {
                const target = e.target;
                if (!(target instanceof Element)) return;
                const paletteEl = target.closest('.palette');
                if (!paletteEl) return;
                const swatches = Array.from(paletteEl.querySelectorAll('.swatch'));
                const colors = swatches.map((s) => getComputedStyle(s).getPropertyValue('--color').trim()).filter(Boolean);
                if (colors.length) {
                    window.dispatchEvent(new CustomEvent('wheel:updatePalette', { detail: { colors } }));
                }
                overlay.classList.remove('open');
                overlay.setAttribute('aria-hidden', 'true');
            });
        }
        if (closeBtn) {
            closeBtn.addEventListener('click', () => {
                overlay.classList.remove('open');
                overlay.setAttribute('aria-hidden', 'true');
            });
        }
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && overlay && overlay.classList.contains('open')) {
                overlay.classList.remove('open');
                overlay.setAttribute('aria-hidden', 'true');
            }
        });
    })();
    </script>

	</body>
</html>

<style>
	html,
	body {
		margin: 0;
		width: 100%;
		height: 100%;
	}
    .container {  display: grid;
        min-height: 100vh;
        grid-template-columns: 0.5fr 2fr 0.5fr;
        grid-template-rows: minmax(56px, auto) auto auto minmax(56px, auto);
        gap: 0px 0px;
        grid-auto-flow: row;
        grid-template-areas:
    "nav-bar nav-bar nav-bar"
    "sidebar-1 game-area sidebar-2"
    "main-content main-content main-content"
    "footer footer footer";
    }

    .nav-bar {
        grid-area: nav-bar;
        background-color: #212121;
        display: flex;
        justify-content: flex-end;
        align-items: center;
        padding: 0 16px;
    }

    .nav-links {
        list-style: none;
        display: flex;
        gap: 24px;
        margin: 0;
        padding: 0;
    }

    .nav-link {
        color: #ffffff;
        text-decoration: none;
        font-family: system-ui, -apple-system, Segoe UI, Roboto, Ubuntu, Cantarell, Noto Sans, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
        font-size: 14px;
    }

    .nav-link:hover {
        text-decoration: underline;
    }

    .sidebar-1 {
        grid-area: sidebar-1;
        background-color: #3b453b;
    }

    .sidebar-2 {
        grid-area: sidebar-2;
        background-color: #3b453b;
    }

    .game-area {  display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-template-rows: auto auto auto;
        gap: 0px 0px;
        grid-auto-flow: row;
        grid-template-areas:
    "game-area-head game-area-head game-area-head"
    "game-area-main game-area-main game-area-main"
    "game-area-footer game-area-footer game-area-footer";
        grid-area: game-area;
    }

    .game-area-head {  display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        grid-template-rows: 1fr 1fr 1fr;
        gap: 0px 0px;
        grid-auto-flow: row;
        grid-template-areas:
    ". . ."
    ". . ."
    ". . .";
        grid-area: game-area-head;
        background-color: #8d9389;
    }

    .game-area-main {
        grid-area: game-area-main;
        background-color: #1b1b1b;
        padding: 24px;
        display: grid;
        grid-template-columns: auto 1fr;
        gap: 24px;
        align-items: start;
    }
    .game-area-main-left {}
    .game-area-main-right { display: grid; place-items: center; }

    .game-area-footer {
        grid-area: game-area-footer;
        background-color: #8d9389;
    }

    .main-content {  display: grid;
        grid-template-columns: 0.5fr 2fr 0.5fr;
        grid-template-rows: 1fr 1fr 1fr;
        gap: 0px 0px;
        grid-auto-flow: row;
        grid-template-areas:
    "main-content-left main-content-body main-content-right"
    "main-content-left main-content-body main-content-right"
    "main-content-left main-content-body main-content-right";
        grid-area: main-content;
        background-color: #1e1e1e;
    }

    .main-content-left { grid-area: main-content-left; }

    .main-content-body {
        grid-area: main-content-body;
        text-align: justify;
        text-decoration-color: #B9BCC3;
        color: #B9BCC3;
        line-height: 1.8;
    }

    .main-content-right { grid-area: main-content-right; }

    .main-content-text {
        width: 100%;
        margin: 0;
    }

    /* Style Markdown h2 like: text-4xl font-bold dark:text-white */
    :global(.main-content-body h2) {
        font-size: 1.25rem; /* text-4xl */
        line-height: 1.5rem;
        font-weight: 700; /* font-bold */
        color: #ffffff; /* dark:text-white */
        margin: 0 0 0.5em 0;
    }

    /* Add top padding to the first Markdown heading */
    :global(.main-content-body h2:first-of-type) {
        padding-top: 1.5rem;
    }

    .footer {
        grid-area: footer;
        background-color: #787878;
        display: flex;
        justify-content: center;
        align-items: center;
    }
    .footer-nav {
        width: 100%;
        display: flex;
        justify-content: center;
    }

    /* Themes Modal (scoped, matching wheel modal) */
    #themes-modal {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.55);
        z-index: 1000;
    }

    #themes-modal.open { display: flex; }

    #themes-modal .modal {
        width: 600px;
        height: 480px;
        max-width: calc(100% - 48px);
        max-height: calc(100% - 48px);
        background: #1c1f23;
        border: 5px solid #aea73b;
        color: #111111;
        padding: 20px 24px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
        display: flex;
        flex-direction: column;
    }

    #themes-modal .modal-title {
        margin: 0 0 8px;
        font-weight: 700;
        font-size: 22px;
        line-height: 1.2;
        color: #ffffff;
    }

    #themes-modal .modal-body {
        margin: 0 0 16px;
        color: #ededed;
        font-size: 16px;
        line-height: 1.5;
        flex: 1;
        overflow: auto;
    }

    #themes-modal .modal-actions {
        margin-top: auto;
        display: flex;
        justify-content: flex-end;
    }

    #themes-modal #themes-modal-close {
        background: #f7b71e;
        color: #ffffff;
        border: none;
        padding: 10px 14px;
        font-weight: 900;
        font-size: 14px;
        line-height: 1;
        cursor: pointer;
    }

    #themes-modal .themes-grid { display: grid; grid-template-columns: 1fr; gap: 10px; }
    #themes-modal .palette { display: flex; gap: 8px; }
    #themes-modal .swatch {
        flex: 1;
        height: 40px;
        border-radius: 6px;
        background: var(--color);
        border: 1px solid rgba(255,255,255,0.15);
    }

    /* Settings Modal (match themes modal) */
    #settings-modal {
        position: fixed;
        inset: 0;
        display: none;
        align-items: center;
        justify-content: center;
        background: rgba(0, 0, 0, 0.55);
        z-index: 1000;
    }
    #settings-modal.open { display: flex; }
    #settings-modal .modal {
        width: 600px;
        height: 480px;
        max-width: calc(100% - 48px);
        max-height: calc(100% - 48px);
        background: #1c1f23;
        border: 5px solid #aea73b;
        color: #111111;
        padding: 20px 24px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.25);
        display: flex;
        flex-direction: column;
    }
    #settings-modal .modal-title {
        margin: 0 0 8px;
        font-weight: 700;
        font-size: 22px;
        line-height: 1.2;
        color: #ffffff;
    }
    #settings-modal .modal-body {
        margin: 0 0 16px;
        color: #ededed;
        font-size: 16px;
        line-height: 1.5;
        flex: 1;
        overflow: auto;
        display: grid;
        place-items: center;
        text-align: center;
    }
    #settings-modal .modal-actions {
        margin-top: auto;
        display: flex;
        justify-content: flex-end;
        gap: 10px;
    }
    #settings-modal #settings-modal-close, #settings-modal #settings-modal-save, #settings-modal #settings-modal-reset {
        background: #f7b71e;
        color: #ffffff;
        border: none;
        padding: 10px 14px;
        font-weight: 900;
        font-size: 14px;
        line-height: 1;
        cursor: pointer;
    }

    /* Settings modal tweaks */
    #settings-modal .settings-grid { display: grid; gap: 16px; width: 100%; max-width: 420px; }
    #settings-modal .setting { display: grid; gap: 8px; }
    #settings-modal label { color: #ffffff; font-size: 14px; }
    #settings-modal input[type="range"] { width: 100%; }

</style>
